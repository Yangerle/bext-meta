{"type":"javascript","name":"通用VIP视频解析","version":"1","synopsis":"各大视频网视频免费观看.","tags":["视频脚本","工具脚本"],"detail":"<p>搬运自 <a rel=\"noopener noreferrer\" href=\"http://via-app.cn/#/pluginDetail/66\">Via 轻插件</a> ，作者 <a rel=\"noopener noreferrer\" href=\"http://via-app.cn/#/user/41\">河丶蟹</a></p><p>对原脚本进行如下修改 ：</p><ul><li>适配本站安装选项</li></ul><p>以下是原版介绍：</p><p><br></p><p>此脚本为代发布，原作者:<strong style=\"color: rgb(240, 102, 102);\">Sentiment</strong></p><p><br></p><p>本脚本能破解并播放各大视频网站的 VIP 视频，包 括但不限于爱奇艺、腾讯视频、优酷、乐视、芒果 TV、搜狐、1905。</p><p><br></p><p>新脚本支持自定义图标大小、颜色、高度、边距、展开菜单框大小、滑动速度、解析接口等</p><p><br></p><p><strong style=\"color: rgb(240, 102, 102);\">via和Alook均可用，都可以直接使用，初次安装如果不生效解决办法：</strong></p><p><br></p><p><strong style=\"color: rgb(240, 102, 102);\">① via浏览器，刷新页面即可。</strong></p><p><strong style=\"color: rgb(240, 102, 102);\">② Alook浏览器，改匹配类型为域名即可。</strong></p><p><br></p><p>声明：解析接口均为网络收集，个别线路存在广告请不要相信“线路”出现的一切广告，失效请在此页面重新安装，或者自行更改解析接口。</p><p><br></p><p class=\"ql-align-center\"><strong style=\"color: rgb(240, 102, 102);\">去广告推荐以下两个订阅规则</strong></p><p class=\"ql-align-center\"><br></p><h2>https://cdn.jsdelivr.net/gh/o0HalfLife0o/list/ad3.txt</h2><p><br></p><h2>https://banbendalao.coding.net/p/adgk/d/ADgk/git/raw/master/ADgk.txt</h2><p><br></p>","source":"// ==UserScript==\n// @name: 通用VIP视频解析\n// @Author: 河丶蟹\n// @version: 2.2.9\n// @description: 爱奇艺、腾讯视频、优酷、乐视、芒果TV、搜狐、1905、PPTV、B站。\n// @include *\n// @match *\n// @createTime: 2021-03-03 12:00:47\n// @updateTime: 2021-06-28 22:25:16\n// ==/UserScript==\nimport config from '@bext/config';\n(function() {\n\t/*\n\t * 自定义区域\n\t * 变量值可自行更改\n\t */\n\t// 主颜色(图标整体颜色,如方框颜色)\n\tconst mianColor = config.mianColor;\n\t// 副颜色(图标层次颜色,如字体颜色)\n\tconst secondColor = config.secondColor;\n\t// 图标右边框距离\n\tconst iconMarginRight = config.iconMarginRight;\n\t// 图标上边框距离\n\tconst iconMarginTop = config.iconMarginTop;\n\t// 图标宽(最小30)\n\tvar iconWidth = config.iconWidth;\n\t// 图标高(图标大小)\n\tconst iconHeight = config.iconHeight;\n\t// 图标圆角比例(当高、宽一致时，0.5为圆圈)\n\tconst iconFilletPercent = config.iconFilletPercent;\n\t// 解析接口菜单框展开的高度\n\tvar developMenuHeight = config.developMenuHeight;\n\t// 解析接口菜单框展开的速度（如果展开动画卡顿请设置0,单位是秒）\n\tvar developMenuSecond = config.developMenuSecond;\n\t// 解析接口（可多个）\n\tconst parseInterfaces = config.parseInterfaces;\n\t/*\n\t * 非自定义区域\n\t * 以下代码勿动\n\t * 以下代码勿动\n\t * 以下代码勿动\n\t */\n\t// 视频网站(规则已定，不可随意更改)\n\tconst videoSites = [\"v.qq.com\",\"tv.sohu.com\",\"iqiyi.com\",\"youku.com\",\"mgtv.com\",\"m.le.com\",\"www.le.com\",\"1905.com\",\"pptv.com\",\"bilibili.com\"];\n\tconst currentUrl = document.location.href;\n\t// 判断是否加载后续代码\n\tif (self != top) {\n\t\treturn;\n\t}\n\tvar result = videoSites.some(site=>{\n\t\tif (currentUrl.match(site)) {\n            return true;\n\t\t}\n        return false;\n\t})\n    if(!result){\n        return;\n    }\n\t// 图标宽度最小值判断（小于30默认30）\n    if(iconWidth<30){\n        iconWidth=30;\n    }\n\t// 解析接口框高度判断（小于30默认30）\n    if(developMenuHeight<(iconWidth*2.6)){\n        developMenuHeight=iconWidth*2.6;\n    }\n\t// 判断PC、移动端\n\tvar uaLogo=\"pc\";\n\tif(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {\n\t\tuaLogo=\"mobile\";\n\t}\n\t// 图标整体定位样式\n\tconst globalStyle = \"cursor:pointer;position:fixed;right:\"+iconMarginRight+\"px;top:\"+iconMarginTop+\"px;z-index:2147483647;\";\n\t// 主图标(矩形)样式\n\tconst mainIconStyle = \"height:\"+iconHeight+\"px;width:\"+iconWidth+\"px;background:\"+mianColor+\";border-radius:\"+(iconFilletPercent*iconWidth)+\"px;box-sizing:border-box;box-shadow:-4px 4px 4px 0px rgba(0,0,0,0.4);\";\n\t// 副图标(三角形)样式\n\tconst triangleStyle = \"border-left:\"+(iconWidth*0.3)+\"px solid \"+secondColor+\";border-top:\"+(iconHeight*0.2)+\"px solid transparent;border-bottom:\"+(iconHeight*0.2)+\"px solid transparent;position:absolute;right:31%;top:30%;\";\n\t// 副图标(正方形)样式\n\tconst squareStyle = \"background:\"+secondColor+\";width:\"+(iconWidth*0.26)+\"px;height:\"+(iconWidth*0.26)+\"px;position:absolute;right:37%;top:37%;\";\n\t// 菜单框外层样式\n    const inMenuBoxStyle = \"width:115%;height:100%;overflow-y:scroll;overflow-x:hidden;\";\n\t// 菜单框里层样式\n\tconst outMenuBoxStyle = \"background:\"+mianColor+\";height:0px;overflow:hidden;font-size:\"+(iconWidth*0.4)+\"px;width:\"+(iconWidth*2.4)+\"px;position:absolute;right:0px;top:\"+iconHeight+\"px;box-shadow:-4px 4px 4px 0px rgba(0,0,0,0.4);border-radius:13px 0 1px 13px;transition:height \"+developMenuSecond+\"s;-moz-transition:height \"+developMenuSecond+\"s;-webkit-transition:height \"+developMenuSecond+\"s;-o-transition:height \"+developMenuSecond+\"s;\";\n\t// 菜单项样式\n\tconst MenuItemsStyle = \"color:\"+secondColor+\";display: block;padding:\"+(iconWidth*0.12)+\"px \"+(iconWidth*0.12)+\"px \"+(iconWidth*0.12)+\"px \"+(iconWidth*0.2)+\"px ;width:\"+(iconWidth*3)+\"px;\";\n\t// Iframe样式\n\tconst IframeStyle = \"frameborder='no' width='100%' height='100%' allowfullscreen='true' allowtransparency='true' frameborder='0' scrolling='no';\";\n    // 视频播放框类ID\n\tvar classAndIDMap\t= {\"pc\":{\"v.qq.com\":\"mod_player\",\"iqiyi.com\":\"flashbox\",\"youku.com\":\"ykPlayer\",\"mgtv.com\":\"mgtv-player-wrap\",\"sohu.com\":\"x-player\",\"le.com\":\"fla_box\",\"1905.com\":\"player\",\"pptv.com\":\"pplive-player\",\"bilibili.com\":\"bilibili-player-video-wrap|player-limit-mask\"},\"mobile\":{\"v.qq.com\":\"mod_player\",\"iqiyi.com\":\"m-box\",\"youku.com\":\"h5-detail-player\",\"mgtv.com\":\"video-area\",\"sohu.com\":\"player-view\",\"le.com\":\"playB\",\"1905.com\":\"player\",\"pptv.com\":\"pp-details-video\",\"bilibili.com\":\"bilibiliPlayer|player-wrapper\"}};\n    // 创建图标\n    createIcon();\n\t// 判断页面加载完成以后图标是否存在\n\tdocument.onreadystatechange = function(){\n        if(document.readyState == 'complete'){\n            if(!document.getElementById(\"mainIcon\")){\n                createIcon();\n            }\n        }\n    }\n    function createIcon(){\n        try{\n            var div = document.createElement(\"div\");\n            div.style.cssText = globalStyle;\n            div.setAttribute(\"id\",\"mainIcon\");\n            var html = \"<div id='mainButton' style='\"+mainIconStyle+\"'><div id='triangle' style='\"+triangleStyle+\"'></div></div><div id='dropDownBox' style='\"+outMenuBoxStyle+\"'><div style=\"+inMenuBoxStyle+\">\";\n            for(var i in parseInterfaces){\n                if(i==parseInterfaces.length-1){\n                    html += \"<span class='spanStyle' style='\"+MenuItemsStyle+\"' url='\"+parseInterfaces[i]+\"'>线路接口\"+(parseInt(i)+1)+\"</span>\";\n                }else{\n                    html += \"<span class='spanStyle' style='\"+MenuItemsStyle+\"border-bottom-style:solid;' url='\"+parseInterfaces[i]+\"'>线路接口\"+(parseInt(i)+1)+\"</span>\";\n                }\n            }\n            html += \"</div></div>\";\n            div.innerHTML = html;\n            document.body.insertBefore(div,document.body.firstChild);\n            div.onclick = function() {\n                var dropDownBox = document.getElementById(\"dropDownBox\").style.height;\n                var mainButton = document.getElementById(\"mainButton\");\n                var triangle = document.getElementById(\"triangle\");\n                if(dropDownBox == \"0px\"){\n                    mainButton.style.borderRadius = (iconFilletPercent*iconWidth)+\"px \"+(iconFilletPercent*iconWidth)+\"px 0 0\";\n                    triangle.removeAttribute(\"style\");\n                    triangle.setAttribute(\"style\",squareStyle);\n                    document.getElementById(\"dropDownBox\").style.height = developMenuHeight+\"px\";\n                }else{\n                    document.getElementById(\"dropDownBox\").style.height = \"0px\";\n                    triangle.removeAttribute(\"style\");\n                    triangle.setAttribute(\"style\",triangleStyle);\n                    mainButton.style.borderRadius = (iconFilletPercent*iconWidth)+\"px\";\n                }\n            }\n            var elements = document.getElementsByClassName(\"spanStyle\");\n            for(var j in elements){\n                elements[j].onmouseover = function(){\n                    this.style.background = secondColor;\n                    this.style.color = mianColor;\n                }\n                elements[j].onmouseout = function(){\n                    this.style.background = mianColor;\n                    this.style.color = secondColor;\n                }\n                elements[j].onclick=function(){\n                    var parseInterface = this.getAttribute(\"url\");\n                    for(let key in classAndIDMap[uaLogo]){\n                        if (document.location.href.match(key)) {\n                            var values = classAndIDMap[uaLogo][key].split(\"|\");\n                            var labelType = \"\";\n                            var class_id = \"\";\n                            for(let value in values){\n                                if(document.getElementById(values[value])){\n                                    class_id = values[value];\n                                    labelType = \"id\";\n                                    break;\n                                }\n                                if(document.getElementsByClassName(values[value]).length>0){\n                                    class_id = values[value];\n                                    labelType = \"class\";\n                                    break;\n                                }\n                            }\n                            if(labelType!=\"\"&&class_id!=\"\"){\n                                var iframe = \"<iframe id='iframePlayBox' src='\"+parseInterface+document.location.href+\"' \"+IframeStyle+\" ></iframe>\";\n                                if(labelType==\"id\"){\n                                    document.getElementById(class_id).innerHTML=\"\";\n                                    document.getElementById(class_id).innerHTML=iframe;\n                                }else{\n                                    document.getElementsByClassName(class_id)[0].innerHTML=\"\";\n                                    if(uaLogo==\"mobile\"){\n                                        document.getElementsByClassName(class_id)[0].style.height=\"225px\";\n                                    }\n                                    document.getElementsByClassName(class_id)[0].innerHTML=iframe;\n                                }\n                                return;\n                            }\n                        }\n                    }\n                    document.getElementById(\"dropDownBox\").style.display = \"none\";\n                }\n            }\n        }catch(error){\n            // exception handling\n        }\n    }\n})();","configSchema":{"type":"object","properties":{"mianColor":{"type":"string","title":"主颜色","description":"图标整体颜色,如方框颜色"},"secondColor":{"type":"string","title":"副颜色","description":"图标层次颜色,如字体颜色"},"iconMarginRight":{"type":"number","title":"图标右边框距离"},"iconMarginTop":{"type":"number","title":"图标上边框距离"},"iconWidth":{"type":"number","title":"图标宽","description":"最小30","minimum":30},"iconHeight":{"type":"number","title":"图标高(图标大小)"},"iconFilletPercent":{"type":"number","title":"图标圆角比例","description":"当高、宽一致时，0.5为圆圈"},"developMenuHeight":{"type":"number","title":"解析接口菜单框展开的高度"},"developMenuSecond":{"type":"number","title":"解析接口菜单框展开的速度","description":"如果展开动画卡顿请设置0,单位是秒","minimum":0},"parseInterfaces":{"type":"array","items":{"type":"string","format":"uri"},"title":"解析接口"}},"required":["mianColor","parseInterfaces","developMenuSecond","developMenuHeight","iconFilletPercent","iconHeight","iconWidth","iconMarginTop","iconMarginRight","secondColor"]},"defaultConfig":{"mianColor":"#de473c","secondColor":"#f3f1e7","iconMarginRight":2,"iconMarginTop":100,"iconWidth":45,"iconHeight":35,"iconFilletPercent":0.3,"developMenuHeight":315,"developMenuSecond":0,"parseInterfaces":["https://z1.m1907.cn/?eps=0&jx=","https://vip.parwix.com:4433/player/?url=","https://lecurl.cn/?url=","https://jx.m3u8.tv/jiexi/?url=","https://api.leduotv.com/wp-api/ifr.php?isDp=1&vid=","https://okjx.cc/?url=","https://m2090.com/?url=","http://51wujin.net/?url=","https://vip.2ktvb.com/player/?url=","https://660e.com/?url=","https://api.sigujx.com/?url=","https://jiexi.janan.net/jiexi/?url=","https://jx.618g.com/?url=","https://jx.ergan.top/?url=","https://api.147g.cc/m3u8.php?url=","http://17kyun.com/api.php?url="]}}